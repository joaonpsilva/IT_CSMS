INFO:Ocpp_Server:Connected to the RMQ Broker
INFO:websockets.server:server listening on 0.0.0.0:9000
INFO:Ocpp_Server:WebSocket Server Started
INFO:     Started server process [24751]
INFO:     Waiting for application startup.
API - INFO - Connected to the RMQ Broker
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
SQL_DB - INFO - Connected to the database
SQL_DB - INFO - Connected to the RMQ Broker
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "verify_password", "type": "request", "content": {"CP_ID": "cp6k", "password": "12345678901234567890"}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'verify_password', 'type': 'request', 'content': {'CP_ID': 'cp6k', 'password': '12345678901234567890'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "verify_password", "type": "response", "content": {"approved": true}, "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'verify_password', 'type': 'response', 'content': {'approved': True}, 'cp_id': 'cp6k', 'status': 'OK'}
INFO:websockets.server:connection open
INFO:Ocpp_Server:Protocols Matched: ocpp2.0.1
INFO:ocpp:cp6k: receive message [2,"e065be396dc3dfc8aa4c1020a64006c3","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.649231},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.187164},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.241671},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.649231},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:26:06Z"}],"offline":true,"seqNo":20,"timestamp":"2023-03-29T09:26:06Z","transactionInfo":{"customData":{"timeSpentConnected":389,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.649231}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.187164}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.241671}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.649231}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:26:06Z"}], "offline": true, "seq_no": 20, "timestamp": "2023-03-29T09:26:06Z", "transaction_info": {"custom_data": {"time_spent_connected": 389, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"e065be396dc3dfc8aa4c1020a64006c3",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.649231}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.187164}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.241671}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.649231}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:26:06Z'}], 'offline': True, 'seq_no': 20, 'timestamp': '2023-03-29T09:26:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 389, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.649231}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.187164}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.241671}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.649231}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:26:06Z'}], 'offline': True, 'seq_no': 20, 'timestamp': '2023-03-29T09:26:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 389, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"f0171fbbbbefe71a4b4ba0edf737a2a0","DataTransfer",{"data":{"installconf":"ewogICAgImRlZmF1bHRMYW5nIjogIkVOIiwKICAgICJjaXJjdWl0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJwb3J0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJpd2l6U3RhdHVzIjogMjU1LAogICAgImNpcmN1aXRTaGFyaW5nIjogMSwKICAgICJpbnB1dENhYmxlQ291bnQiOiAxLAogICAgInBhbmVsUGhhc2VzIjogMSwKICAgICJpbnB1dENhYmxlUGhhc2VzIjogMSwKICAgICJvdXRsZXQyUGhhc2UiOiAxLAogICAgIm91dGxldDFQaGFzZSI6IDIsCiAgICAiaXdpelZlcnNpb24iOiAyCn0="},"messageId":"NotifyInstallConfig","vendorId":"com.chargepoint"}]
ERROR:ocpp:Error while handling request '<Call - unique_id=f0171fbbbbefe71a4b4ba0edf737a2a0, action=DataTransfer, payload={'data': {'installconf': 'ewogICAgImRlZmF1bHRMYW5nIjogIkVOIiwKICAgICJjaXJjdWl0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJwb3J0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJpd2l6U3RhdHVzIjogMjU1LAogICAgImNpcmN1aXRTaGFyaW5nIjogMSwKICAgICJpbnB1dENhYmxlQ291bnQiOiAxLAogICAgInBhbmVsUGhhc2VzIjogMSwKICAgICJpbnB1dENhYmxlUGhhc2VzIjogMSwKICAgICJvdXRsZXQyUGhhc2UiOiAxLAogICAgIm91dGxldDFQaGFzZSI6IDIsCiAgICAiaXdpelZlcnNpb24iOiAyCn0='}, 'messageId': 'NotifyInstallConfig', 'vendorId': 'com.chargepoint'}>'
Traceback (most recent call last):
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 172, in _handle_call
    handlers = self.route_map[msg.action]
KeyError: 'DataTransfer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 150, in route_message
    await self._handle_call(msg)
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 174, in _handle_call
    raise NotSupportedError(
ocpp.exceptions.NotSupportedError: NotSupportedError: Request Action is recognized but not supported by the receiver, {'cause': 'No handler for DataTransfer registered.'}
INFO:ocpp:cp6k: send [4,"f0171fbbbbefe71a4b4ba0edf737a2a0","NotSupported","Request Action is recognized but not supported by the receiver",{"cause":"No handler for DataTransfer registered."}]
INFO:ocpp:cp6k: receive message [2,"67b16feec593190b103eaef1c5a4ba44","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.571625},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.175148},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.23525},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.571625},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:26:36Z"}],"seqNo":21,"timestamp":"2023-03-29T09:26:36Z","transactionInfo":{"customData":{"timeSpentConnected":419,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.571625}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.175148}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.23525}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.571625}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:26:36Z"}], "seq_no": 21, "timestamp": "2023-03-29T09:26:36Z", "transaction_info": {"custom_data": {"time_spent_connected": 419, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"67b16feec593190b103eaef1c5a4ba44",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.571625}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.175148}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.23525}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.571625}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:26:36Z'}], 'seq_no': 21, 'timestamp': '2023-03-29T09:26:36Z', 'transaction_info': {'custom_data': {'time_spent_connected': 419, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.571625}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.175148}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.23525}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.571625}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:26:36Z'}], 'seq_no': 21, 'timestamp': '2023-03-29T09:26:36Z', 'transaction_info': {'custom_data': {'time_spent_connected': 419, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"ee4d0c4acf93b540534bca0cdc4e6acb","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":8.4,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"ee4d0c4acf93b540534bca0cdc4e6acb",{"currentTime":"2023-03-29T09:26:37.453962"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "update", "type": "ocpp_log", "content": {"table": "Charge_Point", "filters": {"cp_id": "cp6k"}, "values": {"is_online": true}}, "cp_id": "cp6k", "status": null}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'update', 'type': 'ocpp_log', 'content': {'table': 'Charge_Point', 'filters': {'cp_id': 'cp6k'}, 'values': {'is_online': True}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'update', 'type': 'ocpp_log', 'content': {'table': 'Charge_Point', 'filters': {'cp_id': 'cp6k'}, 'values': {'is_online': True}}, 'cp_id': 'cp6k', 'status': None}
WARNING:Ocpp_Server:CP closed the connection
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "update", "type": "ocpp_log", "content": {"table": "Charge_Point", "filters": {"cp_id": "cp6k"}, "values": {"is_online": false}}, "cp_id": "cp6k", "status": null}
INFO:websockets.server:connection closed
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'update', 'type': 'ocpp_log', 'content': {'table': 'Charge_Point', 'filters': {'cp_id': 'cp6k'}, 'values': {'is_online': False}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'update', 'type': 'ocpp_log', 'content': {'table': 'Charge_Point', 'filters': {'cp_id': 'cp6k'}, 'values': {'is_online': False}}, 'cp_id': 'cp6k', 'status': None}
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "verify_password", "type": "request", "content": {"CP_ID": "cp6k", "password": "12345678901234567890"}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'verify_password', 'type': 'request', 'content': {'CP_ID': 'cp6k', 'password': '12345678901234567890'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "verify_password", "type": "response", "content": {"approved": true}, "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'verify_password', 'type': 'response', 'content': {'approved': True}, 'cp_id': 'cp6k', 'status': 'OK'}
INFO:websockets.server:connection open
INFO:Ocpp_Server:Protocols Matched: ocpp2.0.1
INFO:ocpp:cp6k: receive message [2,"4a68960987038e2ae1e8a042d7441494","BootNotification",{"chargingStation":{"firmwareVersion":"0.9.1+2022.02.10.86-alpha","model":"FALC-B","serialNumber":"223576029140","vendorName":"com.chargepoint"},"reason":"ApplicationReset"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "BootNotification", "type": "ocpp_log", "content": {"charging_station": {"firmware_version": "0.9.1+2022.02.10.86-alpha", "model": "FALC-B", "serial_number": "223576029140", "vendor_name": "com.chargepoint"}, "reason": "ApplicationReset", "timestamp": "2023-03-29T09:26:46.929798"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"4a68960987038e2ae1e8a042d7441494",{"currentTime":"2023-03-29T09:26:46.932177","interval":30,"status":"Accepted"}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'BootNotification', 'type': 'ocpp_log', 'content': {'charging_station': {'firmware_version': '0.9.1+2022.02.10.86-alpha', 'model': 'FALC-B', 'serial_number': '223576029140', 'vendor_name': 'com.chargepoint'}, 'reason': 'ApplicationReset', 'timestamp': '2023-03-29T09:26:46.929798'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'BootNotification', 'type': 'ocpp_log', 'content': {'charging_station': {'firmware_version': '0.9.1+2022.02.10.86-alpha', 'model': 'FALC-B', 'serial_number': '223576029140', 'vendor_name': 'com.chargepoint'}, 'reason': 'ApplicationReset', 'timestamp': '2023-03-29T09:26:46.929798'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: send [2,"8ae7bb58-7ddb-4c5e-be73-f843adb60e9b","GetChargingProfiles",{"requestId":84,"chargingProfile":{"chargingProfilePurpose":"ChargingStationExternalConstraints"}}]
INFO:ocpp:cp6k: receive message [2,"08d830a42f6246203c3616f11560f75e","NotifyEvent",{"eventData":[{"actualValue":"Occupied","component":{"evse":{"id":1},"name":"EVSE"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:26:46Z","trigger":"Delta","variable":{"name":"AvailabilityState"}},{"actualValue":"Available","component":{"evse":{"id":2},"name":"EVSE"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:26:46Z","trigger":"Delta","variable":{"name":"AvailabilityState"}},{"actualValue":"Available","component":{"name":"ChargingStation"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:26:46Z","trigger":"Delta","variable":{"name":"AvailabilityState"}}],"generatedAt":"2023-03-29T09:26:47Z","seqNo":0}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "NotifyEvent", "type": "ocpp_log", "content": {"event_data": [{"actual_value": "Occupied", "component": {"evse": {"id": 1}, "name": "EVSE"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:26:46Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}, {"actual_value": "Available", "component": {"evse": {"id": 2}, "name": "EVSE"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:26:46Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}, {"actual_value": "Available", "component": {"name": "ChargingStation"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:26:46Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}], "generated_at": "2023-03-29T09:26:47Z", "seq_no": 0}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"08d830a42f6246203c3616f11560f75e",{}]
INFO:ocpp:cp6k: receive message [3,"8ae7bb58-7ddb-4c5e-be73-f843adb60e9b",{"status":"NoProfiles"}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Occupied', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:26:46Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}, {'actual_value': 'Available', 'component': {'evse': {'id': 2}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:26:46Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}, {'actual_value': 'Available', 'component': {'name': 'ChargingStation'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:26:46Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:26:47Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Occupied', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:26:46Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}, {'actual_value': 'Available', 'component': {'evse': {'id': 2}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:26:46Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}, {'actual_value': 'Available', 'component': {'name': 'ChargingStation'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:26:46Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:26:47Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"661cd9654797372df6aa7ce50b351858","DataTransfer",{"data":{"installconf":"ewogICAgImRlZmF1bHRMYW5nIjogIkVOIiwKICAgICJjaXJjdWl0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJwb3J0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJpd2l6U3RhdHVzIjogMjU1LAogICAgImNpcmN1aXRTaGFyaW5nIjogMSwKICAgICJpbnB1dENhYmxlQ291bnQiOiAxLAogICAgInBhbmVsUGhhc2VzIjogMSwKICAgICJpbnB1dENhYmxlUGhhc2VzIjogMSwKICAgICJvdXRsZXQyUGhhc2UiOiAxLAogICAgIm91dGxldDFQaGFzZSI6IDIsCiAgICAiaXdpelZlcnNpb24iOiAyCn0="},"messageId":"NotifyInstallConfig","vendorId":"com.chargepoint"}]
ERROR:ocpp:Error while handling request '<Call - unique_id=661cd9654797372df6aa7ce50b351858, action=DataTransfer, payload={'data': {'installconf': 'ewogICAgImRlZmF1bHRMYW5nIjogIkVOIiwKICAgICJjaXJjdWl0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJwb3J0Q3VycmVudExpbWl0IjogMTYuMCwKICAgICJpd2l6U3RhdHVzIjogMjU1LAogICAgImNpcmN1aXRTaGFyaW5nIjogMSwKICAgICJpbnB1dENhYmxlQ291bnQiOiAxLAogICAgInBhbmVsUGhhc2VzIjogMSwKICAgICJpbnB1dENhYmxlUGhhc2VzIjogMSwKICAgICJvdXRsZXQyUGhhc2UiOiAxLAogICAgIm91dGxldDFQaGFzZSI6IDIsCiAgICAiaXdpelZlcnNpb24iOiAyCn0='}, 'messageId': 'NotifyInstallConfig', 'vendorId': 'com.chargepoint'}>'
Traceback (most recent call last):
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 172, in _handle_call
    handlers = self.route_map[msg.action]
KeyError: 'DataTransfer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 150, in route_message
    await self._handle_call(msg)
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 174, in _handle_call
    raise NotSupportedError(
ocpp.exceptions.NotSupportedError: NotSupportedError: Request Action is recognized but not supported by the receiver, {'cause': 'No handler for DataTransfer registered.'}
INFO:ocpp:cp6k: send [4,"661cd9654797372df6aa7ce50b351858","NotSupported","Request Action is recognized but not supported by the receiver",{"cause":"No handler for DataTransfer registered."}]
INFO:ocpp:cp6k: receive message [2,"1874c34cd1b135fe6d12c91e245a34cb","StatusNotification",{"connectorId":1,"connectorStatus":"Available","evseId":2,"timestamp":"2023-03-29T09:26:49Z"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "StatusNotification", "type": "ocpp_log", "content": {"connector_id": 1, "connector_status": "Available", "evse_id": 2, "timestamp": "2023-03-29T09:26:49Z"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"1874c34cd1b135fe6d12c91e245a34cb",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Available', 'evse_id': 2, 'timestamp': '2023-03-29T09:26:49Z'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Available', 'evse_id': 2, 'timestamp': '2023-03-29T09:26:49Z'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"dcb46d842035e8add297c1ac87fca9dd","StatusNotification",{"connectorId":1,"connectorStatus":"Occupied","evseId":1,"timestamp":"2023-03-29T09:26:49Z"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "StatusNotification", "type": "ocpp_log", "content": {"connector_id": 1, "connector_status": "Occupied", "evse_id": 1, "timestamp": "2023-03-29T09:26:49Z"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"dcb46d842035e8add297c1ac87fca9dd",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Occupied', 'evse_id': 1, 'timestamp': '2023-03-29T09:26:49Z'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Occupied', 'evse_id': 1, 'timestamp': '2023-03-29T09:26:49Z'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"1dc8f412f0fca6b163c5f318a29f7d2a","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.454498},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.159592},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.228556},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.454498},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:27:06Z"}],"seqNo":22,"timestamp":"2023-03-29T09:27:06Z","transactionInfo":{"customData":{"timeSpentConnected":449,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.454498}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.159592}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.228556}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.454498}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:27:06Z"}], "seq_no": 22, "timestamp": "2023-03-29T09:27:06Z", "transaction_info": {"custom_data": {"time_spent_connected": 449, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"1dc8f412f0fca6b163c5f318a29f7d2a",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.454498}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.159592}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.228556}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.454498}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:27:06Z'}], 'seq_no': 22, 'timestamp': '2023-03-29T09:27:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 449, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.454498}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.159592}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.228556}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.454498}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:27:06Z'}], 'seq_no': 22, 'timestamp': '2023-03-29T09:27:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 449, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"54a0aaab2dc8757a80d5af0b165989df","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":10.200000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"54a0aaab2dc8757a80d5af0b165989df",{"currentTime":"2023-03-29T09:27:17.238018"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "update", "type": "ocpp_log", "content": {"table": "Charge_Point", "filters": {"cp_id": "cp6k"}, "values": {"is_online": true}}, "cp_id": "cp6k", "status": null}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'update', 'type': 'ocpp_log', 'content': {'table': 'Charge_Point', 'filters': {'cp_id': 'cp6k'}, 'values': {'is_online': True}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'update', 'type': 'ocpp_log', 'content': {'table': 'Charge_Point', 'filters': {'cp_id': 'cp6k'}, 'values': {'is_online': True}}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"3b75c40e735ed7fa6a8fc0d55d3cb3c3","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.387238},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.154116},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.226101},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.387238},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:27:26Z"}],"seqNo":23,"timestamp":"2023-03-29T09:27:26Z","transactionInfo":{"customData":{"timeSpentConnected":469,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.387238}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.154116}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.226101}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.387238}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:27:26Z"}], "seq_no": 23, "timestamp": "2023-03-29T09:27:26Z", "transaction_info": {"custom_data": {"time_spent_connected": 469, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"3b75c40e735ed7fa6a8fc0d55d3cb3c3",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.387238}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.154116}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.226101}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.387238}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:27:26Z'}], 'seq_no': 23, 'timestamp': '2023-03-29T09:27:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 469, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.387238}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.154116}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.226101}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.387238}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:27:26Z'}], 'seq_no': 23, 'timestamp': '2023-03-29T09:27:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 469, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"94585121930dfbe3a6ebbfcae34cc870","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.614487},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.174553},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.231838},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.614487},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:27:46Z"}],"seqNo":24,"timestamp":"2023-03-29T09:27:46Z","transactionInfo":{"customData":{"timeSpentConnected":489,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.614487}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.174553}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.231838}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.614487}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:27:46Z"}], "seq_no": 24, "timestamp": "2023-03-29T09:27:46Z", "transaction_info": {"custom_data": {"time_spent_connected": 489, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"94585121930dfbe3a6ebbfcae34cc870",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.614487}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.174553}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.231838}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.614487}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:27:46Z'}], 'seq_no': 24, 'timestamp': '2023-03-29T09:27:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 489, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.614487}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.174553}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.231838}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.614487}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:27:46Z'}], 'seq_no': 24, 'timestamp': '2023-03-29T09:27:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 489, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"ad722a550eac7aab5db6fb1639627eba","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":11.200000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"ad722a550eac7aab5db6fb1639627eba",{"currentTime":"2023-03-29T09:27:47.737080"}]
INFO:ocpp:cp6k: receive message [2,"d62284388fa68df7eddf13cbe9a0e319","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.464706},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.161886},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.227707},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.464706},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:28:06Z"}],"seqNo":25,"timestamp":"2023-03-29T09:28:06Z","transactionInfo":{"customData":{"timeSpentConnected":509,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.464706}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.161886}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.227707}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.464706}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:28:06Z"}], "seq_no": 25, "timestamp": "2023-03-29T09:28:06Z", "transaction_info": {"custom_data": {"time_spent_connected": 509, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"d62284388fa68df7eddf13cbe9a0e319",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.464706}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.161886}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.227707}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.464706}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:28:06Z'}], 'seq_no': 25, 'timestamp': '2023-03-29T09:28:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 509, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.464706}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.161886}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.227707}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.464706}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:28:06Z'}], 'seq_no': 25, 'timestamp': '2023-03-29T09:28:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 509, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"31e7b397fde1686ce2266c038864bd9e","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":9.8,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"31e7b397fde1686ce2266c038864bd9e",{"currentTime":"2023-03-29T09:28:16.984517"}]
INFO:ocpp:cp6k: receive message [2,"4877f4f85509089d5bbe94ff8b57350e","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.433517},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.157337},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.225574},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.433517},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:28:26Z"}],"seqNo":26,"timestamp":"2023-03-29T09:28:26Z","transactionInfo":{"customData":{"timeSpentConnected":529,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.433517}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.157337}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.225574}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.433517}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:28:26Z"}], "seq_no": 26, "timestamp": "2023-03-29T09:28:26Z", "transaction_info": {"custom_data": {"time_spent_connected": 529, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"4877f4f85509089d5bbe94ff8b57350e",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.433517}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.157337}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.225574}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.433517}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:28:26Z'}], 'seq_no': 26, 'timestamp': '2023-03-29T09:28:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 529, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.433517}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.157337}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.225574}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.433517}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:28:26Z'}], 'seq_no': 26, 'timestamp': '2023-03-29T09:28:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 529, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"6f761ee5a9f6196943f49b385023d27c","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.743515},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.186024},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.235007},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.743515},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:28:46Z"}],"seqNo":27,"timestamp":"2023-03-29T09:28:46Z","transactionInfo":{"customData":{"timeSpentConnected":549,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.743515}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.186024}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.235007}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.743515}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:28:46Z"}], "seq_no": 27, "timestamp": "2023-03-29T09:28:46Z", "transaction_info": {"custom_data": {"time_spent_connected": 549, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"6f761ee5a9f6196943f49b385023d27c",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.743515}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.186024}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.235007}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.743515}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:28:46Z'}], 'seq_no': 27, 'timestamp': '2023-03-29T09:28:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 549, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.743515}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.186024}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.235007}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.743515}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:28:46Z'}], 'seq_no': 27, 'timestamp': '2023-03-29T09:28:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 549, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"5c71840ccf64382dad85cedda18be3b4","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":9.600000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"5c71840ccf64382dad85cedda18be3b4",{"currentTime":"2023-03-29T09:28:47.499906"}]
INFO:ocpp:cp6k: receive message [2,"33bbb9ee04694128abfd37454a7d068c","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":231.326569},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.224497},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.2469},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":231.326569},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:29:06Z"}],"seqNo":28,"timestamp":"2023-03-29T09:29:06Z","transactionInfo":{"customData":{"timeSpentConnected":569,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 231.326569}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.224497}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.2469}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 231.326569}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:29:06Z"}], "seq_no": 28, "timestamp": "2023-03-29T09:29:06Z", "transaction_info": {"custom_data": {"time_spent_connected": 569, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"33bbb9ee04694128abfd37454a7d068c",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 231.326569}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.224497}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.2469}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 231.326569}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:29:06Z'}], 'seq_no': 28, 'timestamp': '2023-03-29T09:29:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 569, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 231.326569}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.224497}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.2469}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 231.326569}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:29:06Z'}], 'seq_no': 28, 'timestamp': '2023-03-29T09:29:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 569, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"91ec9e98c3908473ec45f4ef98932038","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-58.0,"snr":8.200000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"91ec9e98c3908473ec45f4ef98932038",{"currentTime":"2023-03-29T09:29:16.975919"}]
INFO:ocpp:cp6k: receive message [2,"f267770983d6100695aa4cfbe8a199e7","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":231.368088},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.229912},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.248203},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":231.368088},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:29:26Z"}],"seqNo":29,"timestamp":"2023-03-29T09:29:26Z","transactionInfo":{"customData":{"timeSpentConnected":589,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 231.368088}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.229912}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.248203}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 231.368088}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:29:26Z"}], "seq_no": 29, "timestamp": "2023-03-29T09:29:26Z", "transaction_info": {"custom_data": {"time_spent_connected": 589, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"f267770983d6100695aa4cfbe8a199e7",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 231.368088}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.229912}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.248203}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 231.368088}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:29:26Z'}], 'seq_no': 29, 'timestamp': '2023-03-29T09:29:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 589, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 231.368088}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.229912}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.248203}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 231.368088}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:29:26Z'}], 'seq_no': 29, 'timestamp': '2023-03-29T09:29:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 589, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"94d1ebe3f0664019d35fff38b95d5ac8","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.166275},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":15.998061},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.172381},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.166275},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:29:46Z"}],"seqNo":30,"timestamp":"2023-03-29T09:29:46Z","transactionInfo":{"customData":{"timeSpentConnected":609,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.166275}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 15.998061}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.172381}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.166275}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:29:46Z"}], "seq_no": 30, "timestamp": "2023-03-29T09:29:46Z", "transaction_info": {"custom_data": {"time_spent_connected": 609, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"94d1ebe3f0664019d35fff38b95d5ac8",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.166275}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 15.998061}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.172381}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.166275}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:29:46Z'}], 'seq_no': 30, 'timestamp': '2023-03-29T09:29:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 609, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.166275}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 15.998061}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.172381}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.166275}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:29:46Z'}], 'seq_no': 30, 'timestamp': '2023-03-29T09:29:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 609, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"40e653a99f6534a94f2d273efe23ed05","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":7.800000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"40e653a99f6534a94f2d273efe23ed05",{"currentTime":"2023-03-29T09:29:50.478357"}]
INFO:ocpp:cp6k: receive message [2,"def06cfc79482ba7e79022c9b17aea67","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"context":"Sample.Clock","measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237}],"timestamp":"2023-03-29T09:30:00Z"}],"seqNo":31,"timestamp":"2023-03-29T09:30:00Z","transactionInfo":{"customData":{"timeSpentConnected":624,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValueClock"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"context": "Sample.Clock", "measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}], "timestamp": "2023-03-29T09:30:00Z"}], "seq_no": 31, "timestamp": "2023-03-29T09:30:00Z", "transaction_info": {"custom_data": {"time_spent_connected": 624, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValueClock"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"def06cfc79482ba7e79022c9b17aea67",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'context': 'Sample.Clock', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}], 'timestamp': '2023-03-29T09:30:00Z'}], 'seq_no': 31, 'timestamp': '2023-03-29T09:30:00Z', 'transaction_info': {'custom_data': {'time_spent_connected': 624, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValueClock'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'context': 'Sample.Clock', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}], 'timestamp': '2023-03-29T09:30:00Z'}], 'seq_no': 31, 'timestamp': '2023-03-29T09:30:00Z', 'transaction_info': {'custom_data': {'time_spent_connected': 624, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValueClock'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"5181f85511a6a1c50dcd65e218826922","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.223053},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.002567},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.174471},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.223053},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:30:06Z"}],"seqNo":32,"timestamp":"2023-03-29T09:30:06Z","transactionInfo":{"customData":{"timeSpentConnected":629,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.223053}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.002567}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.174471}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.223053}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:30:06Z"}], "seq_no": 32, "timestamp": "2023-03-29T09:30:06Z", "transaction_info": {"custom_data": {"time_spent_connected": 629, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"5181f85511a6a1c50dcd65e218826922",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.223053}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.002567}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.174471}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.223053}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:30:06Z'}], 'seq_no': 32, 'timestamp': '2023-03-29T09:30:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 629, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.223053}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.002567}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.174471}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.223053}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:30:06Z'}], 'seq_no': 32, 'timestamp': '2023-03-29T09:30:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 629, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"82e6e5aefe4943661d8f2574cb8c12ca","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":10.0,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"82e6e5aefe4943661d8f2574cb8c12ca",{"currentTime":"2023-03-29T09:30:16.976123"}]
INFO:ocpp:cp6k: receive message [2,"e8d5f93ccc67c1f33ef53837aea7ac10","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.287308},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.012011},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.176844},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.287308},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:30:26Z"}],"seqNo":33,"timestamp":"2023-03-29T09:30:26Z","transactionInfo":{"customData":{"timeSpentConnected":649,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.287308}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.012011}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.176844}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.287308}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:30:26Z"}], "seq_no": 33, "timestamp": "2023-03-29T09:30:26Z", "transaction_info": {"custom_data": {"time_spent_connected": 649, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"e8d5f93ccc67c1f33ef53837aea7ac10",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.287308}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.012011}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.176844}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.287308}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:30:26Z'}], 'seq_no': 33, 'timestamp': '2023-03-29T09:30:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 649, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.287308}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.012011}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.176844}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.287308}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:30:26Z'}], 'seq_no': 33, 'timestamp': '2023-03-29T09:30:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 649, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"dff4360fb44546d51c9379ee3a06a967","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.246643},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.012684},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.177323},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.246643},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:30:46Z"}],"seqNo":34,"timestamp":"2023-03-29T09:30:46Z","transactionInfo":{"customData":{"timeSpentConnected":669,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.246643}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.012684}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.177323}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.246643}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:30:46Z"}], "seq_no": 34, "timestamp": "2023-03-29T09:30:46Z", "transaction_info": {"custom_data": {"time_spent_connected": 669, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"dff4360fb44546d51c9379ee3a06a967",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.246643}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.012684}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.177323}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.246643}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:30:46Z'}], 'seq_no': 34, 'timestamp': '2023-03-29T09:30:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 669, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.246643}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.012684}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.177323}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.246643}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:30:46Z'}], 'seq_no': 34, 'timestamp': '2023-03-29T09:30:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 669, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"ee5f8c71cc80b5996ee893229286e97a","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-58.0,"snr":13.0,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"ee5f8c71cc80b5996ee893229286e97a",{"currentTime":"2023-03-29T09:30:47.291156"}]
INFO:ocpp:cp6k: receive message [2,"18cb64f7bf7672c59c9f2c9fb9db3272","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.589737},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.009304},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.175503},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.589737},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:31:06Z"}],"seqNo":35,"timestamp":"2023-03-29T09:31:06Z","transactionInfo":{"customData":{"timeSpentConnected":689,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.589737}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.009304}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.175503}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.589737}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:31:06Z"}], "seq_no": 35, "timestamp": "2023-03-29T09:31:06Z", "transaction_info": {"custom_data": {"time_spent_connected": 689, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"18cb64f7bf7672c59c9f2c9fb9db3272",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.589737}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.009304}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.175503}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.589737}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:31:06Z'}], 'seq_no': 35, 'timestamp': '2023-03-29T09:31:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 689, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.589737}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.009304}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.175503}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.589737}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:31:06Z'}], 'seq_no': 35, 'timestamp': '2023-03-29T09:31:06Z', 'transaction_info': {'custom_data': {'time_spent_connected': 689, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"a423511f04bb0583b87e4fa47746fd7b","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":11.8,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"a423511f04bb0583b87e4fa47746fd7b",{"currentTime":"2023-03-29T09:31:17.028071"}]
API - INFO - RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "API", "method": "login", "type": "request", "content": {"email": "user1", "password": "user1"}, "cp_id": null, "status": null}
SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'API', 'method': 'login', 'type': 'request', 'content': {'email': 'user1', 'password': 'user1'}, 'cp_id': None, 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "API", "origin": "SQL_DB", "method": "login", "type": "response", "content": {"id": 1, "permission_level": 1, "id_token": {"id_token": "1dee35d6-ed03-4882-9762-86197f258a74", "type": "ISO14443"}}, "cp_id": null, "status": "OK"}
API - INFO - RESPONSE: {'destination': 'API', 'origin': 'SQL_DB', 'method': 'login', 'type': 'response', 'content': {'id': 1, 'permission_level': 1, 'id_token': {'id_token': '1dee35d6-ed03-4882-9762-86197f258a74', 'type': 'ISO14443'}}, 'cp_id': None, 'status': 'OK'}
INFO:     127.0.0.1:48090 - "GET /login?email=user1&password=user1 HTTP/1.1" 200 OK
INFO:ocpp:cp6k: receive message [2,"2d71b54ad2a47a97a6dc3b4eee054a2e","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.90538},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.031757},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.18308},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.90538},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:31:26Z"}],"seqNo":36,"timestamp":"2023-03-29T09:31:26Z","transactionInfo":{"customData":{"timeSpentConnected":709,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.90538}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.031757}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.18308}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.90538}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:31:26Z"}], "seq_no": 36, "timestamp": "2023-03-29T09:31:26Z", "transaction_info": {"custom_data": {"time_spent_connected": 709, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"2d71b54ad2a47a97a6dc3b4eee054a2e",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.90538}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.031757}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.18308}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.90538}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:31:26Z'}], 'seq_no': 36, 'timestamp': '2023-03-29T09:31:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 709, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.90538}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.031757}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.18308}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.90538}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:31:26Z'}], 'seq_no': 36, 'timestamp': '2023-03-29T09:31:26Z', 'transaction_info': {'custom_data': {'time_spent_connected': 709, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"6ef3aa06c272336dc30e23529e2cc5e9","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.004227},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.038506},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.185224},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.004227},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:31:46Z"}],"seqNo":37,"timestamp":"2023-03-29T09:31:46Z","transactionInfo":{"customData":{"timeSpentConnected":729,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.004227}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.038506}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.185224}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.004227}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:31:46Z"}], "seq_no": 37, "timestamp": "2023-03-29T09:31:46Z", "transaction_info": {"custom_data": {"time_spent_connected": 729, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"6ef3aa06c272336dc30e23529e2cc5e9",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.004227}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.038506}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.185224}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.004227}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:31:46Z'}], 'seq_no': 37, 'timestamp': '2023-03-29T09:31:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 729, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.004227}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.038506}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.185224}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.004227}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:31:46Z'}], 'seq_no': 37, 'timestamp': '2023-03-29T09:31:46Z', 'transaction_info': {'custom_data': {'time_spent_connected': 729, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"fda9bf42aff468b27de6a9226d3b54db","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":9.200000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"fda9bf42aff468b27de6a9226d3b54db",{"currentTime":"2023-03-29T09:31:48.038545"}]
API - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "API", "method": "requestStartTransaction", "type": "request", "content": {"id_token": {"id_token": "1dee35d6-ed03-4882-9762-86197f258a74", "type": "ISO14443", "additional_info": null}, "remote_start_id": null, "evse_id": 1, "group_id_token": null, "charging_profile": null}, "cp_id": "cp6k", "status": null}
INFO:Ocpp_Server:RECEIVED: {'destination': 'Ocpp_Server', 'origin': 'API', 'method': 'requestStartTransaction', 'type': 'request', 'content': {'id_token': {'id_token': '1dee35d6-ed03-4882-9762-86197f258a74', 'type': 'ISO14443', 'additional_info': None}, 'remote_start_id': None, 'evse_id': 1, 'group_id_token': None, 'charging_profile': None}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: send [2,"a23a12f2-5ab1-4df6-80f1-35221a85f387","RequestStartTransaction",{"idToken":{"idToken":"1dee35d6-ed03-4882-9762-86197f258a74","type":"ISO14443"},"remoteStartId":85,"evseId":1}]
INFO:ocpp:cp6k: receive message [3,"a23a12f2-5ab1-4df6-80f1-35221a85f387",{"status":"Rejected","statusInfo":{"additionalInfo":"no ports available (Operation not permitted)","reasonCode":"SessionStartRejected"}}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "API", "origin": "Ocpp_Server", "method": "requestStartTransaction", "type": "response", "content": {"status": "Rejected", "status_info": {"additional_info": "no ports available (Operation not permitted)", "reason_code": "SessionStartRejected"}, "transaction_id": null}, "cp_id": "cp6k", "status": "OK"}
API - INFO - RESPONSE: {'destination': 'API', 'origin': 'Ocpp_Server', 'method': 'requestStartTransaction', 'type': 'response', 'content': {'status': 'Rejected', 'status_info': {'additional_info': 'no ports available (Operation not permitted)', 'reason_code': 'SessionStartRejected'}, 'transaction_id': None}, 'cp_id': 'cp6k', 'status': 'OK'}
INFO:     127.0.0.1:59178 - "POST /charge/start?evse_id=1&cp_id=cp6k HTTP/1.1" 200 OK
INFO:ocpp:cp6k: receive message [2,"5abee4ffea5e95ad26acd9e8a179a1ac","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.231735},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.042147},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.190627},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.231735},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:32:16Z"}],"seqNo":38,"timestamp":"2023-03-29T09:32:16Z","transactionInfo":{"customData":{"timeSpentConnected":759,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.231735}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.042147}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.190627}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.231735}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:32:16Z"}], "seq_no": 38, "timestamp": "2023-03-29T09:32:16Z", "transaction_info": {"custom_data": {"time_spent_connected": 759, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"5abee4ffea5e95ad26acd9e8a179a1ac",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.231735}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.042147}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.190627}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.231735}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:32:16Z'}], 'seq_no': 38, 'timestamp': '2023-03-29T09:32:16Z', 'transaction_info': {'custom_data': {'time_spent_connected': 759, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.231735}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.042147}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.190627}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.231735}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:32:16Z'}], 'seq_no': 38, 'timestamp': '2023-03-29T09:32:16Z', 'transaction_info': {'custom_data': {'time_spent_connected': 759, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"5e113bb382898378168bf74ba4017719","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":7.2,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"5e113bb382898378168bf74ba4017719",{"currentTime":"2023-03-29T09:32:17.745692"}]
INFO:ocpp:cp6k: receive message [2,"ff29036b3e9ed7706ea7be8e5301ba70","TransactionEvent",{"eventType":"Ended","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"context":"Transaction.End","measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.9}],"timestamp":"2023-03-29T09:32:31Z"}],"seqNo":39,"timestamp":"2023-03-29T09:32:31Z","transactionInfo":{"chargingState":"Idle","customData":{"timeSpentConnected":775,"vendorId":"com.chargepoint"},"stoppedReason":"Remote","timeSpentCharging":0,"transactionId":"3074225104181791326"},"triggerReason":"ChargingStateChanged"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Ended", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"context": "Transaction.End", "measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.9}], "timestamp": "2023-03-29T09:32:31Z"}], "seq_no": 39, "timestamp": "2023-03-29T09:32:31Z", "transaction_info": {"charging_state": "Idle", "custom_data": {"time_spent_connected": 775, "vendor_id": "com.chargepoint"}, "stopped_reason": "Remote", "time_spent_charging": 0, "transaction_id": "3074225104181791326"}, "trigger_reason": "ChargingStateChanged"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"ff29036b3e9ed7706ea7be8e5301ba70",{}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "remove", "type": "ocpp_log", "content": {"table": "ChargingProfile", "filters": {"transaction_id": "3074225104181791326"}}, "cp_id": "cp6k", "status": null}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Ended', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.End', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}], 'timestamp': '2023-03-29T09:32:31Z'}], 'seq_no': 39, 'timestamp': '2023-03-29T09:32:31Z', 'transaction_info': {'charging_state': 'Idle', 'custom_data': {'time_spent_connected': 775, 'vendor_id': 'com.chargepoint'}, 'stopped_reason': 'Remote', 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Ended', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.End', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}], 'timestamp': '2023-03-29T09:32:31Z'}], 'seq_no': 39, 'timestamp': '2023-03-29T09:32:31Z', 'transaction_info': {'charging_state': 'Idle', 'custom_data': {'time_spent_connected': 775, 'vendor_id': 'com.chargepoint'}, 'stopped_reason': 'Remote', 'time_spent_charging': 0, 'transaction_id': '3074225104181791326'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: send [2,"8e61b499-83a7-420f-a2a5-4f592d07fb15","GetTransactionStatus",{"transactionId":"3074225104181791326"}]
API - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'remove', 'type': 'ocpp_log', 'content': {'table': 'ChargingProfile', 'filters': {'transaction_id': '3074225104181791326'}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'remove', 'type': 'ocpp_log', 'content': {'table': 'ChargingProfile', 'filters': {'transaction_id': '3074225104181791326'}}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [4,"8e61b499-83a7-420f-a2a5-4f592d07fb15","NotImplemented","GetTransactionStatusRequest handler not available",{}]
WARNING:ocpp:Received a CALLError: <CallError - unique_id=8e61b499-83a7-420f-a2a5-4f592d07fb15, error_code=NotImplemented, error_description=GetTransactionStatusRequest handler not available, error_details={}>'
ERROR:asyncio:Task exception was never retrieved
future: <Task finished name='Task-343' coro=<ChargePoint.after_TransactionEvent() done, defined at /home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py:726> exception=<NotImplementedError - description=GetTransactionStatusRequest handler not available, details={}>>
Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 750, in after_TransactionEvent
    transaction_status = await self.getTransactionStatus(transaction_id=transaction_id)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 338, in getTransactionStatus
    return await self.call(request, suppress=False)
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 286, in call
    raise response.to_exception()
ocpp.exceptions.NotImplementedError: NotImplementedError: GetTransactionStatusRequest handler not available, {}
INFO:ocpp:cp6k: receive message [2,"6d7d8d12657cf76676f4f9f3beb9decb","StatusNotification",{"connectorId":1,"connectorStatus":"Available","evseId":1,"timestamp":"2023-03-29T09:32:34Z"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "StatusNotification", "type": "ocpp_log", "content": {"connector_id": 1, "connector_status": "Available", "evse_id": 1, "timestamp": "2023-03-29T09:32:34Z"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"6d7d8d12657cf76676f4f9f3beb9decb",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Available', 'evse_id': 1, 'timestamp': '2023-03-29T09:32:34Z'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Available', 'evse_id': 1, 'timestamp': '2023-03-29T09:32:34Z'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"e6b16e44fabaedb67812270d7f3cf5ce","NotifyEvent",{"eventData":[{"actualValue":"Available","component":{"evse":{"id":1},"name":"EVSE"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:32:32Z","trigger":"Delta","variable":{"name":"AvailabilityState"}}],"generatedAt":"2023-03-29T09:32:37Z","seqNo":0}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "NotifyEvent", "type": "ocpp_log", "content": {"event_data": [{"actual_value": "Available", "component": {"evse": {"id": 1}, "name": "EVSE"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:32:32Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}], "generated_at": "2023-03-29T09:32:37Z", "seq_no": 0}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"e6b16e44fabaedb67812270d7f3cf5ce",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Available', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:32:32Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:32:37Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Available', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:32:32Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:32:37Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "API", "method": "requestStartTransaction", "type": "request", "content": {"id_token": {"id_token": "1dee35d6-ed03-4882-9762-86197f258a74", "type": "ISO14443", "additional_info": null}, "remote_start_id": null, "evse_id": 1, "group_id_token": null, "charging_profile": null}, "cp_id": "cp6k", "status": null}
INFO:Ocpp_Server:RECEIVED: {'destination': 'Ocpp_Server', 'origin': 'API', 'method': 'requestStartTransaction', 'type': 'request', 'content': {'id_token': {'id_token': '1dee35d6-ed03-4882-9762-86197f258a74', 'type': 'ISO14443', 'additional_info': None}, 'remote_start_id': None, 'evse_id': 1, 'group_id_token': None, 'charging_profile': None}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: send [2,"32a77711-4b9a-4359-8ff5-8680dabeb11d","RequestStartTransaction",{"idToken":{"idToken":"1dee35d6-ed03-4882-9762-86197f258a74","type":"ISO14443"},"remoteStartId":86,"evseId":1}]
INFO:ocpp:cp6k: receive message [3,"32a77711-4b9a-4359-8ff5-8680dabeb11d",{"status":"Accepted","transactionId":"1218098663591398350"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "API", "origin": "Ocpp_Server", "method": "requestStartTransaction", "type": "response", "content": {"status": "Accepted", "status_info": null, "transaction_id": "1218098663591398350"}, "cp_id": "cp6k", "status": "OK"}
API - INFO - RESPONSE: {'destination': 'API', 'origin': 'Ocpp_Server', 'method': 'requestStartTransaction', 'type': 'response', 'content': {'status': 'Accepted', 'status_info': None, 'transaction_id': '1218098663591398350'}, 'cp_id': 'cp6k', 'status': 'OK'}
INFO:     127.0.0.1:53728 - "POST /charge/start?evse_id=1&cp_id=cp6k HTTP/1.1" 200 OK
INFO:ocpp:cp6k: receive message [2,"80cbc5f001335707c81c8b1973719f9f","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":10.600000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"80cbc5f001335707c81c8b1973719f9f",{"currentTime":"2023-03-29T09:32:47.368979"}]
INFO:ocpp:cp6k: receive message [2,"c7ac7a347a678dfae94c9e9ba5532ce3","TransactionEvent",{"eventType":"Started","evse":{"connectorId":1,"id":1},"idToken":{"idToken":"1dee35d6-ed03-4882-9762-86197f258a74","type":"Central"},"meterValue":[{"sampledValue":[{"context":"Transaction.Begin","measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.9},{"context":"Transaction.Begin","measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.987228},{"context":"Transaction.Begin","measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.037689},{"context":"Transaction.Begin","measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.185673},{"context":"Transaction.Begin","measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.987228},{"context":"Transaction.Begin","measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"context":"Transaction.Begin","measurand":"Power.Factor","phase":"L1","value":1.0},{"context":"Transaction.Begin","measurand":"Power.Factor","phase":"L2","value":1.0},{"context":"Transaction.Begin","measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:32:56Z"}],"seqNo":0,"timestamp":"2023-03-29T09:32:56Z","transactionInfo":{"chargingState":"EVConnected","customData":{"timeSpentConnected":0,"vendorId":"com.chargepoint"},"remoteStartId":86,"transactionId":"1218098663591398350"},"triggerReason":"ChargingStateChanged"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Started", "evse": {"connector_id": 1, "id": 1}, "id_token": {"id_token": "1dee35d6-ed03-4882-9762-86197f258a74", "type": "Central"}, "meter_value": [{"sampled_value": [{"context": "Transaction.Begin", "measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.9}, {"context": "Transaction.Begin", "measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.987228}, {"context": "Transaction.Begin", "measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.037689}, {"context": "Transaction.Begin", "measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.185673}, {"context": "Transaction.Begin", "measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.987228}, {"context": "Transaction.Begin", "measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"context": "Transaction.Begin", "measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"context": "Transaction.Begin", "measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:32:56Z"}], "seq_no": 0, "timestamp": "2023-03-29T09:32:56Z", "transaction_info": {"charging_state": "EVConnected", "custom_data": {"time_spent_connected": 0, "vendor_id": "com.chargepoint"}, "remote_start_id": 86, "transaction_id": "1218098663591398350"}, "trigger_reason": "ChargingStateChanged"}, "cp_id": "cp6k", "status": null}
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "select", "type": "request", "content": {"table": "IdToken", "filters": {"id_token": "1dee35d6-ed03-4882-9762-86197f258a74"}, "mode": {"id_token_info": {"group_id_token": {}, "evse": {}}}}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Started', 'evse': {'connector_id': 1, 'id': 1}, 'id_token': {'id_token': '1dee35d6-ed03-4882-9762-86197f258a74', 'type': 'Central'}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.Begin', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.987228}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.037689}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.185673}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.987228}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:32:56Z'}], 'seq_no': 0, 'timestamp': '2023-03-29T09:32:56Z', 'transaction_info': {'charging_state': 'EVConnected', 'custom_data': {'time_spent_connected': 0, 'vendor_id': 'com.chargepoint'}, 'remote_start_id': 86, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Started', 'evse': {'connector_id': 1, 'id': 1}, 'id_token': {'id_token': '1dee35d6-ed03-4882-9762-86197f258a74', 'type': 'Central'}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.Begin', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.987228}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.037689}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.185673}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.987228}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:32:56Z'}], 'seq_no': 0, 'timestamp': '2023-03-29T09:32:56Z', 'transaction_info': {'charging_state': 'EVConnected', 'custom_data': {'time_spent_connected': 0, 'vendor_id': 'com.chargepoint'}, 'remote_start_id': 86, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'select', 'type': 'request', 'content': {'table': 'IdToken', 'filters': {'id_token': '1dee35d6-ed03-4882-9762-86197f258a74'}, 'mode': {'id_token_info': {'group_id_token': {}, 'evse': {}}}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "select", "type": "response", "content": [{"id_token": "1dee35d6-ed03-4882-9762-86197f258a74", "type": "ISO14443", "id_token_info": {"cache_expiry_date_time": null, "language1": "PT", "valid": true, "charging_priority": null, "language2": null, "group_id_token": null, "evse": [1, 2]}}], "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'select', 'type': 'response', 'content': [{'id_token': '1dee35d6-ed03-4882-9762-86197f258a74', 'type': 'ISO14443', 'id_token_info': {'cache_expiry_date_time': None, 'language1': 'PT', 'valid': True, 'charging_priority': None, 'language2': None, 'group_id_token': None, 'evse': [1, 2]}}], 'cp_id': 'cp6k', 'status': 'OK'}
cp6k - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 89, in authorize_idToken
    id_token_info = await self.get_id_token_info(id_token)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 76, in get_id_token_info
    assert(id_token["type"] == req_id_token["type"])
AssertionError

cp6k - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 89, in authorize_idToken
    id_token_info = await self.get_id_token_info(id_token)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 76, in get_id_token_info
    assert(id_token["type"] == req_id_token["type"])
AssertionError

ERROR:cp6k:Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 89, in authorize_idToken
    id_token_info = await self.get_id_token_info(id_token)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 76, in get_id_token_info
    assert(id_token["type"] == req_id_token["type"])
AssertionError

INFO:ocpp:cp6k: send [3,"c7ac7a347a678dfae94c9e9ba5532ce3",{"idTokenInfo":{"status":"Invalid"}}]
INFO:ocpp:cp6k: receive message [2,"31e5e0070e170d8089cc48d15e5299f2","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"seqNo":1,"timestamp":"2023-03-29T09:32:56Z","transactionInfo":{"chargingState":"SuspendedEVSE","customData":{"timeSpentConnected":0,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"ChargingStateChanged"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "seq_no": 1, "timestamp": "2023-03-29T09:32:56Z", "transaction_info": {"charging_state": "SuspendedEVSE", "custom_data": {"time_spent_connected": 0, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "ChargingStateChanged"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"31e5e0070e170d8089cc48d15e5299f2",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'seq_no': 1, 'timestamp': '2023-03-29T09:32:56Z', 'transaction_info': {'charging_state': 'SuspendedEVSE', 'custom_data': {'time_spent_connected': 0, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'seq_no': 1, 'timestamp': '2023-03-29T09:32:56Z', 'transaction_info': {'charging_state': 'SuspendedEVSE', 'custom_data': {'time_spent_connected': 0, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"277acb50bf89a28f7cc8596d97aeec09","StatusNotification",{"connectorId":1,"connectorStatus":"Occupied","evseId":1,"timestamp":"2023-03-29T09:32:59Z"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "StatusNotification", "type": "ocpp_log", "content": {"connector_id": 1, "connector_status": "Occupied", "evse_id": 1, "timestamp": "2023-03-29T09:32:59Z"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"277acb50bf89a28f7cc8596d97aeec09",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Occupied', 'evse_id': 1, 'timestamp': '2023-03-29T09:32:59Z'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Occupied', 'evse_id': 1, 'timestamp': '2023-03-29T09:32:59Z'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"58b03db9d28967557b4616617fb8235f","NotifyEvent",{"eventData":[{"actualValue":"Occupied","component":{"evse":{"id":1},"name":"EVSE"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:32:57Z","trigger":"Delta","variable":{"name":"AvailabilityState"}}],"generatedAt":"2023-03-29T09:33:02Z","seqNo":0}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "NotifyEvent", "type": "ocpp_log", "content": {"event_data": [{"actual_value": "Occupied", "component": {"evse": {"id": 1}, "name": "EVSE"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:32:57Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}], "generated_at": "2023-03-29T09:33:02Z", "seq_no": 0}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"58b03db9d28967557b4616617fb8235f",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Occupied', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:32:57Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:33:02Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Occupied', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:32:57Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:33:02Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"714effb82db2cfa773b76ad34eb0da93","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.894272},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.03021},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.183878},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.894272},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:33:16Z"}],"seqNo":2,"timestamp":"2023-03-29T09:33:16Z","transactionInfo":{"customData":{"timeSpentConnected":19,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.894272}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.03021}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.183878}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.894272}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:33:16Z"}], "seq_no": 2, "timestamp": "2023-03-29T09:33:16Z", "transaction_info": {"custom_data": {"time_spent_connected": 19, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"714effb82db2cfa773b76ad34eb0da93",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.894272}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.03021}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.183878}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.894272}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:33:16Z'}], 'seq_no': 2, 'timestamp': '2023-03-29T09:33:16Z', 'transaction_info': {'custom_data': {'time_spent_connected': 19, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.894272}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.03021}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.183878}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.894272}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:33:16Z'}], 'seq_no': 2, 'timestamp': '2023-03-29T09:33:16Z', 'transaction_info': {'custom_data': {'time_spent_connected': 19, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"691f9d8790c193bd43174693cdd92c8c","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":7.4,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"691f9d8790c193bd43174693cdd92c8c",{"currentTime":"2023-03-29T09:33:16.976205"}]
INFO:ocpp:cp6k: receive message [2,"79b78186965509784c7c22fe21cb6c78","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.935165},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.033867},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.183865},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.935165},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:33:36Z"}],"seqNo":3,"timestamp":"2023-03-29T09:33:36Z","transactionInfo":{"customData":{"timeSpentConnected":39,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.935165}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.033867}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.183865}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.935165}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:33:36Z"}], "seq_no": 3, "timestamp": "2023-03-29T09:33:36Z", "transaction_info": {"custom_data": {"time_spent_connected": 39, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"79b78186965509784c7c22fe21cb6c78",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.935165}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.033867}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.183865}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.935165}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:33:36Z'}], 'seq_no': 3, 'timestamp': '2023-03-29T09:33:36Z', 'transaction_info': {'custom_data': {'time_spent_connected': 39, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.935165}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.033867}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.183865}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.935165}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:33:36Z'}], 'seq_no': 3, 'timestamp': '2023-03-29T09:33:36Z', 'transaction_info': {'custom_data': {'time_spent_connected': 39, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"fb8885fb120a4158d988982dc75ef6eb","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":9.4,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"fb8885fb120a4158d988982dc75ef6eb",{"currentTime":"2023-03-29T09:33:47.254415"}]
INFO:ocpp:cp6k: receive message [2,"3bdee06adb4460a33e2cd337690b379d","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":228.316422},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.015783},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.177396},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":228.316422},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":6.9e-05},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":6.9e-05},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.015675},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:33:56Z"}],"seqNo":4,"timestamp":"2023-03-29T09:33:56Z","transactionInfo":{"customData":{"timeSpentConnected":59,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 228.316422}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.015783}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.177396}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 228.316422}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 6.9e-05}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 6.9e-05}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.015675}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:33:56Z"}], "seq_no": 4, "timestamp": "2023-03-29T09:33:56Z", "transaction_info": {"custom_data": {"time_spent_connected": 59, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"3bdee06adb4460a33e2cd337690b379d",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.316422}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.015783}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.177396}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.316422}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 6.9e-05}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 6.9e-05}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.015675}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:33:56Z'}], 'seq_no': 4, 'timestamp': '2023-03-29T09:33:56Z', 'transaction_info': {'custom_data': {'time_spent_connected': 59, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 228.316422}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.015783}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.177396}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 228.316422}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 6.9e-05}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 6.9e-05}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.015675}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:33:56Z'}], 'seq_no': 4, 'timestamp': '2023-03-29T09:33:56Z', 'transaction_info': {'custom_data': {'time_spent_connected': 59, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"6e4757576252bf27edd343b05ab8a89a","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.741318},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.179731},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.230734},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.741318},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:34:16Z"}],"seqNo":5,"timestamp":"2023-03-29T09:34:16Z","transactionInfo":{"customData":{"timeSpentConnected":79,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.741318}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.179731}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.230734}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.741318}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:34:16Z"}], "seq_no": 5, "timestamp": "2023-03-29T09:34:16Z", "transaction_info": {"custom_data": {"time_spent_connected": 79, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"6e4757576252bf27edd343b05ab8a89a",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.741318}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.179731}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.230734}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.741318}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:34:16Z'}], 'seq_no': 5, 'timestamp': '2023-03-29T09:34:16Z', 'transaction_info': {'custom_data': {'time_spent_connected': 79, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.741318}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.179731}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.230734}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.741318}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:34:16Z'}], 'seq_no': 5, 'timestamp': '2023-03-29T09:34:16Z', 'transaction_info': {'custom_data': {'time_spent_connected': 79, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"a460653cd7adeec8670cd563dae94b34","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-64.0,"snr":7.800000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"a460653cd7adeec8670cd563dae94b34",{"currentTime":"2023-03-29T09:34:17.070777"}]
INFO:ocpp:cp6k: receive message [2,"e87d1fca3b734effa06f559158faa0aa","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.874237},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.556168},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.173388},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.228461},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.556168},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:34:36Z"}],"seqNo":6,"timestamp":"2023-03-29T09:34:36Z","transactionInfo":{"customData":{"timeSpentConnected":99,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.874237}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.556168}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.173388}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.228461}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.556168}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:34:36Z"}], "seq_no": 6, "timestamp": "2023-03-29T09:34:36Z", "transaction_info": {"custom_data": {"time_spent_connected": 99, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"e87d1fca3b734effa06f559158faa0aa",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.556168}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.173388}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.228461}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.556168}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:34:36Z'}], 'seq_no': 6, 'timestamp': '2023-03-29T09:34:36Z', 'transaction_info': {'custom_data': {'time_spent_connected': 99, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.874237}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.556168}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.173388}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.228461}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.556168}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:34:36Z'}], 'seq_no': 6, 'timestamp': '2023-03-29T09:34:36Z', 'transaction_info': {'custom_data': {'time_spent_connected': 99, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"d29c5f48e5f94e9f967ab08c47d15402","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-9.0,"rssi":-58.0,"snr":8.8,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"d29c5f48e5f94e9f967ab08c47d15402",{"currentTime":"2023-03-29T09:34:47.165905"}]
INFO:ocpp:cp6k: receive message [2,"a5445d144166da7d94e7f0bbbb3e2ea0","TransactionEvent",{"eventType":"Ended","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"context":"Transaction.End","measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.9}],"timestamp":"2023-03-29T09:34:51Z"}],"seqNo":7,"timestamp":"2023-03-29T09:34:51Z","transactionInfo":{"chargingState":"EVConnected","customData":{"timeSpentConnected":115,"vendorId":"com.chargepoint"},"stoppedReason":"DeAuthorized","timeSpentCharging":0,"transactionId":"1218098663591398350"},"triggerReason":"ChargingStateChanged"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Ended", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"context": "Transaction.End", "measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.9}], "timestamp": "2023-03-29T09:34:51Z"}], "seq_no": 7, "timestamp": "2023-03-29T09:34:51Z", "transaction_info": {"charging_state": "EVConnected", "custom_data": {"time_spent_connected": 115, "vendor_id": "com.chargepoint"}, "stopped_reason": "DeAuthorized", "time_spent_charging": 0, "transaction_id": "1218098663591398350"}, "trigger_reason": "ChargingStateChanged"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"a5445d144166da7d94e7f0bbbb3e2ea0",{}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "remove", "type": "ocpp_log", "content": {"table": "ChargingProfile", "filters": {"transaction_id": "1218098663591398350"}}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Ended', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.End', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}], 'timestamp': '2023-03-29T09:34:51Z'}], 'seq_no': 7, 'timestamp': '2023-03-29T09:34:51Z', 'transaction_info': {'charging_state': 'EVConnected', 'custom_data': {'time_spent_connected': 115, 'vendor_id': 'com.chargepoint'}, 'stopped_reason': 'DeAuthorized', 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Ended', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.End', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}], 'timestamp': '2023-03-29T09:34:51Z'}], 'seq_no': 7, 'timestamp': '2023-03-29T09:34:51Z', 'transaction_info': {'charging_state': 'EVConnected', 'custom_data': {'time_spent_connected': 115, 'vendor_id': 'com.chargepoint'}, 'stopped_reason': 'DeAuthorized', 'time_spent_charging': 0, 'transaction_id': '1218098663591398350'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: send [2,"143ce60f-61d1-4b98-9539-cf7dee647eb6","GetTransactionStatus",{"transactionId":"1218098663591398350"}]
API - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'remove', 'type': 'ocpp_log', 'content': {'table': 'ChargingProfile', 'filters': {'transaction_id': '1218098663591398350'}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'remove', 'type': 'ocpp_log', 'content': {'table': 'ChargingProfile', 'filters': {'transaction_id': '1218098663591398350'}}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [4,"143ce60f-61d1-4b98-9539-cf7dee647eb6","NotImplemented","GetTransactionStatusRequest handler not available",{}]
WARNING:ocpp:Received a CALLError: <CallError - unique_id=143ce60f-61d1-4b98-9539-cf7dee647eb6, error_code=NotImplemented, error_description=GetTransactionStatusRequest handler not available, error_details={}>'
ERROR:asyncio:Task exception was never retrieved
future: <Task finished name='Task-474' coro=<ChargePoint.after_TransactionEvent() done, defined at /home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py:726> exception=<NotImplementedError - description=GetTransactionStatusRequest handler not available, details={}>>
Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 750, in after_TransactionEvent
    transaction_status = await self.getTransactionStatus(transaction_id=transaction_id)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/ocpp_server/chargePointRepr.py", line 338, in getTransactionStatus
    return await self.call(request, suppress=False)
  File "/home/it2s/.local/lib/python3.10/site-packages/ocpp/charge_point.py", line 286, in call
    raise response.to_exception()
ocpp.exceptions.NotImplementedError: NotImplementedError: GetTransactionStatusRequest handler not available, {}
INFO:ocpp:cp6k: receive message [2,"27c3dd9138ffeaffcf4edea248bce79b","StatusNotification",{"connectorId":1,"connectorStatus":"Available","evseId":1,"timestamp":"2023-03-29T09:34:53Z"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "StatusNotification", "type": "ocpp_log", "content": {"connector_id": 1, "connector_status": "Available", "evse_id": 1, "timestamp": "2023-03-29T09:34:53Z"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"27c3dd9138ffeaffcf4edea248bce79b",{}]
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Available', 'evse_id': 1, 'timestamp': '2023-03-29T09:34:53Z'}, 'cp_id': 'cp6k', 'status': None}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Available', 'evse_id': 1, 'timestamp': '2023-03-29T09:34:53Z'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"7a12f92e7f009866d7c68d6079c0ad36","NotifyEvent",{"eventData":[{"actualValue":"Available","component":{"evse":{"id":1},"name":"EVSE"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:34:51Z","trigger":"Delta","variable":{"name":"AvailabilityState"}}],"generatedAt":"2023-03-29T09:34:56Z","seqNo":0}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "NotifyEvent", "type": "ocpp_log", "content": {"event_data": [{"actual_value": "Available", "component": {"evse": {"id": 1}, "name": "EVSE"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:34:51Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}], "generated_at": "2023-03-29T09:34:56Z", "seq_no": 0}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"7a12f92e7f009866d7c68d6079c0ad36",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Available', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:34:51Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:34:56Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Available', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:34:51Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:34:56Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"14e71854cc40dea9b93fdd41bab18649","Authorize",{"idToken":{"additionalInfo":[{"additionalIdToken":"MIFARE","type":"CardType"},{"additionalIdToken":"Classic4K","type":"CardSubtype"}],"idToken":"41C56A05","type":"ISO14443"}}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "select", "type": "request", "content": {"table": "IdToken", "filters": {"id_token": "41C56A05"}, "mode": {"id_token_info": {"group_id_token": {}, "evse": {}}}}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'select', 'type': 'request', 'content': {'table': 'IdToken', 'filters': {'id_token': '41C56A05'}, 'mode': {'id_token_info': {'group_id_token': {}, 'evse': {}}}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "select", "type": "response", "content": [{"id_token": "41C56A05", "type": "ISO14443", "id_token_info": {"cache_expiry_date_time": null, "language1": null, "valid": true, "charging_priority": null, "language2": null, "group_id_token": null, "evse": [1, 2, 3]}}], "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'select', 'type': 'response', 'content': [{'id_token': '41C56A05', 'type': 'ISO14443', 'id_token_info': {'cache_expiry_date_time': None, 'language1': None, 'valid': True, 'charging_priority': None, 'language2': None, 'group_id_token': None, 'evse': [1, 2, 3]}}], 'cp_id': 'cp6k', 'status': 'OK'}
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "select", "type": "request", "content": {"table": "EVSE", "filters": {"cp_id": "cp6k"}}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'select', 'type': 'request', 'content': {'table': 'EVSE', 'filters': {'cp_id': 'cp6k'}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "select", "type": "response", "content": [{"cp_id": "cp6k", "evse_id": 1}, {"cp_id": "cp6k", "evse_id": 2}, {"cp_id": "cp6k", "evse_id": 3}], "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'select', 'type': 'response', 'content': [{'cp_id': 'cp6k', 'evse_id': 1}, {'cp_id': 'cp6k', 'evse_id': 2}, {'cp_id': 'cp6k', 'evse_id': 3}], 'cp_id': 'cp6k', 'status': 'OK'}
INFO:ocpp:cp6k: send [3,"14e71854cc40dea9b93fdd41bab18649",{"idTokenInfo":{"status":"Accepted"}}]
INFO:ocpp:cp6k: receive message [2,"68d151be6957d0535c865eb5814fa677","TransactionEvent",{"eventType":"Started","evse":{"connectorId":1,"id":1},"idToken":{"additionalInfo":[{"additionalIdToken":"MIFARE","type":"CardType"},{"additionalIdToken":"Classic4K","type":"CardSubtype"}],"idToken":"41C56A05","type":"ISO14443"},"meterValue":[{"sampledValue":[{"context":"Transaction.Begin","measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.9},{"context":"Transaction.Begin","measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.059006},{"context":"Transaction.Begin","measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":16.132469},{"context":"Transaction.Begin","measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":5.21592},{"context":"Transaction.Begin","measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.059006},{"context":"Transaction.Begin","measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.0},{"context":"Transaction.Begin","measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":0.0},{"context":"Transaction.Begin","measurand":"Power.Factor","phase":"L1","value":1.0},{"context":"Transaction.Begin","measurand":"Power.Factor","phase":"L2","value":1.0},{"context":"Transaction.Begin","measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:35:13Z"}],"seqNo":0,"timestamp":"2023-03-29T09:35:13Z","transactionInfo":{"chargingState":"EVConnected","customData":{"timeSpentConnected":0,"vendorId":"com.chargepoint"},"transactionId":"6519450883396284070"},"triggerReason":"ChargingStateChanged"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Started", "evse": {"connector_id": 1, "id": 1}, "id_token": {"additional_info": [{"additional_id_token": "MIFARE", "type": "CardType"}, {"additional_id_token": "Classic4K", "type": "CardSubtype"}], "id_token": "41C56A05", "type": "ISO14443"}, "meter_value": [{"sampled_value": [{"context": "Transaction.Begin", "measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.9}, {"context": "Transaction.Begin", "measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.059006}, {"context": "Transaction.Begin", "measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 16.132469}, {"context": "Transaction.Begin", "measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 5.21592}, {"context": "Transaction.Begin", "measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.059006}, {"context": "Transaction.Begin", "measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 0.0}, {"context": "Transaction.Begin", "measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"context": "Transaction.Begin", "measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"context": "Transaction.Begin", "measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:35:13Z"}], "seq_no": 0, "timestamp": "2023-03-29T09:35:13Z", "transaction_info": {"charging_state": "EVConnected", "custom_data": {"time_spent_connected": 0, "vendor_id": "com.chargepoint"}, "transaction_id": "6519450883396284070"}, "trigger_reason": "ChargingStateChanged"}, "cp_id": "cp6k", "status": null}
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "select", "type": "request", "content": {"table": "IdToken", "filters": {"id_token": "41C56A05"}, "mode": {"id_token_info": {"group_id_token": {}, "evse": {}}}}, "cp_id": "cp6k", "status": null}
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Started', 'evse': {'connector_id': 1, 'id': 1}, 'id_token': {'additional_info': [{'additional_id_token': 'MIFARE', 'type': 'CardType'}, {'additional_id_token': 'Classic4K', 'type': 'CardSubtype'}], 'id_token': '41C56A05', 'type': 'ISO14443'}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.Begin', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.059006}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.132469}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.21592}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.059006}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:35:13Z'}], 'seq_no': 0, 'timestamp': '2023-03-29T09:35:13Z', 'transaction_info': {'charging_state': 'EVConnected', 'custom_data': {'time_spent_connected': 0, 'vendor_id': 'com.chargepoint'}, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Started', 'evse': {'connector_id': 1, 'id': 1}, 'id_token': {'additional_info': [{'additional_id_token': 'MIFARE', 'type': 'CardType'}, {'additional_id_token': 'Classic4K', 'type': 'CardSubtype'}], 'id_token': '41C56A05', 'type': 'ISO14443'}, 'meter_value': [{'sampled_value': [{'context': 'Transaction.Begin', 'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.9}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.059006}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 16.132469}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 5.21592}, {'context': 'Transaction.Begin', 'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.059006}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 0.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'context': 'Transaction.Begin', 'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:35:13Z'}], 'seq_no': 0, 'timestamp': '2023-03-29T09:35:13Z', 'transaction_info': {'charging_state': 'EVConnected', 'custom_data': {'time_spent_connected': 0, 'vendor_id': 'com.chargepoint'}, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'select', 'type': 'request', 'content': {'table': 'IdToken', 'filters': {'id_token': '41C56A05'}, 'mode': {'id_token_info': {'group_id_token': {}, 'evse': {}}}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "select", "type": "response", "content": [{"id_token": "41C56A05", "type": "ISO14443", "id_token_info": {"cache_expiry_date_time": null, "language1": null, "valid": true, "charging_priority": null, "language2": null, "group_id_token": null, "evse": [1, 2, 3]}}], "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'select', 'type': 'response', 'content': [{'id_token': '41C56A05', 'type': 'ISO14443', 'id_token_info': {'cache_expiry_date_time': None, 'language1': None, 'valid': True, 'charging_priority': None, 'language2': None, 'group_id_token': None, 'evse': [1, 2, 3]}}], 'cp_id': 'cp6k', 'status': 'OK'}
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": "SQL_DB", "origin": "Ocpp_Server", "method": "select", "type": "request", "content": {"table": "EVSE", "filters": {"cp_id": "cp6k"}}, "cp_id": "cp6k", "status": null}
SQL_DB - INFO - RECEIVED: {'destination': 'SQL_DB', 'origin': 'Ocpp_Server', 'method': 'select', 'type': 'request', 'content': {'table': 'EVSE', 'filters': {'cp_id': 'cp6k'}}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RabbitMQ SENDING Message: {"destination": "Ocpp_Server", "origin": "SQL_DB", "method": "select", "type": "response", "content": [{"cp_id": "cp6k", "evse_id": 1}, {"cp_id": "cp6k", "evse_id": 2}, {"cp_id": "cp6k", "evse_id": 3}], "cp_id": "cp6k", "status": "OK"}
INFO:Ocpp_Server:RESPONSE: {'destination': 'Ocpp_Server', 'origin': 'SQL_DB', 'method': 'select', 'type': 'response', 'content': [{'cp_id': 'cp6k', 'evse_id': 1}, {'cp_id': 'cp6k', 'evse_id': 2}, {'cp_id': 'cp6k', 'evse_id': 3}], 'cp_id': 'cp6k', 'status': 'OK'}
INFO:ocpp:cp6k: send [3,"68d151be6957d0535c865eb5814fa677",{"idTokenInfo":{"status":"Accepted"}}]
INFO:ocpp:cp6k: receive message [2,"da5c18103ef2d6bd249bc4d24abf038c","StatusNotification",{"connectorId":1,"connectorStatus":"Occupied","evseId":1,"timestamp":"2023-03-29T09:35:15Z"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "StatusNotification", "type": "ocpp_log", "content": {"connector_id": 1, "connector_status": "Occupied", "evse_id": 1, "timestamp": "2023-03-29T09:35:15Z"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"da5c18103ef2d6bd249bc4d24abf038c",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Occupied', 'evse_id': 1, 'timestamp': '2023-03-29T09:35:15Z'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'StatusNotification', 'type': 'ocpp_log', 'content': {'connector_id': 1, 'connector_status': 'Occupied', 'evse_id': 1, 'timestamp': '2023-03-29T09:35:15Z'}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"7cb0c0cffdc3f4445811de1f19d572e4","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-14.0,"rssi":-56.0,"snr":12.200000000000001,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"7cb0c0cffdc3f4445811de1f19d572e4",{"currentTime":"2023-03-29T09:35:17.580937"}]
INFO:ocpp:cp6k: receive message [2,"14863d0aa00a5b3c47d825d1dfd67358","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"seqNo":1,"timestamp":"2023-03-29T09:35:17Z","transactionInfo":{"chargingState":"Charging","customData":{"timeSpentConnected":3,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"ChargingStateChanged"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "seq_no": 1, "timestamp": "2023-03-29T09:35:17Z", "transaction_info": {"charging_state": "Charging", "custom_data": {"time_spent_connected": 3, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "ChargingStateChanged"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"14863d0aa00a5b3c47d825d1dfd67358",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'seq_no': 1, 'timestamp': '2023-03-29T09:35:17Z', 'transaction_info': {'charging_state': 'Charging', 'custom_data': {'time_spent_connected': 3, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'seq_no': 1, 'timestamp': '2023-03-29T09:35:17Z', 'transaction_info': {'charging_state': 'Charging', 'custom_data': {'time_spent_connected': 3, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'ChargingStateChanged'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"38ddfbd7080a8ec68bbfb11e7d0e2934","NotifyEvent",{"eventData":[{"actualValue":"Occupied","component":{"evse":{"id":1},"name":"EVSE"},"eventId":0,"eventNotificationType":"HardWiredMonitor","timestamp":"2023-03-29T09:35:13Z","trigger":"Delta","variable":{"name":"AvailabilityState"}}],"generatedAt":"2023-03-29T09:35:18Z","seqNo":0}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "NotifyEvent", "type": "ocpp_log", "content": {"event_data": [{"actual_value": "Occupied", "component": {"evse": {"id": 1}, "name": "EVSE"}, "event_id": 0, "event_notification_type": "HardWiredMonitor", "timestamp": "2023-03-29T09:35:13Z", "trigger": "Delta", "variable": {"name": "AvailabilityState"}}], "generated_at": "2023-03-29T09:35:18Z", "seq_no": 0}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"38ddfbd7080a8ec68bbfb11e7d0e2934",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Occupied', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:35:13Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:35:18Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'NotifyEvent', 'type': 'ocpp_log', 'content': {'event_data': [{'actual_value': 'Occupied', 'component': {'evse': {'id': 1}, 'name': 'EVSE'}, 'event_id': 0, 'event_notification_type': 'HardWiredMonitor', 'timestamp': '2023-03-29T09:35:13Z', 'trigger': 'Delta', 'variable': {'name': 'AvailabilityState'}}], 'generated_at': '2023-03-29T09:35:18Z', 'seq_no': 0}, 'cp_id': 'cp6k', 'status': None}
INFO:ocpp:cp6k: receive message [2,"09664b71902d2e9923b4cc9a56f69a6f","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.896447},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.813034},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":229.81221},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":229.812241},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.813034},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.06688},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.006873},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.014148},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.045859},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":15.369876},{"measurand":"Power.Factor","phase":"L1","value":1.0},{"measurand":"Power.Factor","phase":"L2","value":1.0},{"measurand":"Power.Factor","phase":"L3","value":1.0}],"timestamp":"2023-03-29T09:35:33Z"}],"seqNo":2,"timestamp":"2023-03-29T09:35:33Z","transactionInfo":{"customData":{"timeSpentConnected":19,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.896447}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.813034}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 229.81221}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 229.812241}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.813034}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.06688}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.006873}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.014148}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.045859}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 15.369876}, {"measurand": "Power.Factor", "phase": "L1", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 1.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 1.0}], "timestamp": "2023-03-29T09:35:33Z"}], "seq_no": 2, "timestamp": "2023-03-29T09:35:33Z", "transaction_info": {"custom_data": {"time_spent_connected": 19, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"09664b71902d2e9923b4cc9a56f69a6f",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.896447}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.813034}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.81221}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.812241}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.813034}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.06688}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006873}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014148}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045859}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.369876}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:35:33Z'}], 'seq_no': 2, 'timestamp': '2023-03-29T09:35:33Z', 'transaction_info': {'custom_data': {'time_spent_connected': 19, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.896447}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.813034}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.81221}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.812241}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.813034}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.06688}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006873}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014148}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045859}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.369876}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 1.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 1.0}], 'timestamp': '2023-03-29T09:35:33Z'}], 'seq_no': 2, 'timestamp': '2023-03-29T09:35:33Z', 'transaction_info': {'custom_data': {'time_spent_connected': 19, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"7b816987ec6ae03d22ef4d5a0dc21125","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-8.0,"rssi":-63.0,"snr":8.4,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"7b816987ec6ae03d22ef4d5a0dc21125",{"currentTime":"2023-03-29T09:35:47.061424"}]
INFO:ocpp:cp6k: receive message [2,"5ad907fcd1d429eaaf453e1898cd3d8d","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.925703},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":230.202484},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":230.201859},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":230.201828},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":230.202484},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.066822},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.006869},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.014189},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.045764},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":15.382491},{"measurand":"Power.Factor","phase":"L1","value":0.0},{"measurand":"Power.Factor","phase":"L2","value":0.0},{"measurand":"Power.Factor","phase":"L3","value":0.176962}],"timestamp":"2023-03-29T09:35:53Z"}],"seqNo":3,"timestamp":"2023-03-29T09:35:53Z","transactionInfo":{"customData":{"timeSpentConnected":39,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.925703}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 230.202484}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 230.201859}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 230.201828}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 230.202484}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.066822}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.006869}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.014189}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.045764}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 15.382491}, {"measurand": "Power.Factor", "phase": "L1", "value": 0.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 0.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 0.176962}], "timestamp": "2023-03-29T09:35:53Z"}], "seq_no": 3, "timestamp": "2023-03-29T09:35:53Z", "transaction_info": {"custom_data": {"time_spent_connected": 39, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"5ad907fcd1d429eaaf453e1898cd3d8d",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.925703}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.202484}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 230.201859}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 230.201828}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.202484}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066822}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006869}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014189}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045764}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.382491}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.176962}], 'timestamp': '2023-03-29T09:35:53Z'}], 'seq_no': 3, 'timestamp': '2023-03-29T09:35:53Z', 'transaction_info': {'custom_data': {'time_spent_connected': 39, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.925703}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 230.202484}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 230.201859}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 230.201828}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 230.202484}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066822}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006869}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014189}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045764}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.382491}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.176962}], 'timestamp': '2023-03-29T09:35:53Z'}], 'seq_no': 3, 'timestamp': '2023-03-29T09:35:53Z', 'transaction_info': {'custom_data': {'time_spent_connected': 39, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"d36546baee7b8c617a6116ea0ecc2369","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.954959},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.798309},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":229.797989},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":229.79808},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.798309},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.066654},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.006853},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.014098},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.045703},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":15.316915},{"measurand":"Power.Factor","phase":"L1","value":0.0},{"measurand":"Power.Factor","phase":"L2","value":0.0},{"measurand":"Power.Factor","phase":"L3","value":0.176962}],"timestamp":"2023-03-29T09:36:13Z"}],"seqNo":4,"timestamp":"2023-03-29T09:36:13Z","transactionInfo":{"customData":{"timeSpentConnected":59,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.954959}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.798309}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 229.797989}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 229.79808}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.798309}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.066654}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.006853}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.014098}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.045703}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 15.316915}, {"measurand": "Power.Factor", "phase": "L1", "value": 0.0}, {"measurand": "Power.Factor", "phase": "L2", "value": 0.0}, {"measurand": "Power.Factor", "phase": "L3", "value": 0.176962}], "timestamp": "2023-03-29T09:36:13Z"}], "seq_no": 4, "timestamp": "2023-03-29T09:36:13Z", "transaction_info": {"custom_data": {"time_spent_connected": 59, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"d36546baee7b8c617a6116ea0ecc2369",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.954959}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.798309}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.797989}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.79808}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.798309}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066654}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006853}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014098}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045703}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.316915}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.176962}], 'timestamp': '2023-03-29T09:36:13Z'}], 'seq_no': 4, 'timestamp': '2023-03-29T09:36:13Z', 'transaction_info': {'custom_data': {'time_spent_connected': 59, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.954959}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.798309}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.797989}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.79808}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.798309}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066654}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006853}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014098}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045703}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.316915}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.0}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.176962}], 'timestamp': '2023-03-29T09:36:13Z'}], 'seq_no': 4, 'timestamp': '2023-03-29T09:36:13Z', 'transaction_info': {'custom_data': {'time_spent_connected': 59, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"832850608acaef789dc5c5ca4f643969","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-13.0,"rssi":-63.0,"snr":10.0,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"832850608acaef789dc5c5ca4f643969",{"currentTime":"2023-03-29T09:36:17.171830"}]
INFO:ocpp:cp6k: receive message [2,"bb03cdc201668d18fa53ab1e2cc3e539","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":544.984159},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.085861},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":229.085373},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":229.085236},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.085861},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.066442},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.006804},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.014006},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.045632},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":15.22103},{"measurand":"Power.Factor","phase":"L1","value":0.050865},{"measurand":"Power.Factor","phase":"L2","value":0.082157},{"measurand":"Power.Factor","phase":"L3","value":0.0}],"timestamp":"2023-03-29T09:36:33Z"}],"seqNo":5,"timestamp":"2023-03-29T09:36:33Z","transactionInfo":{"customData":{"timeSpentConnected":79,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 544.984159}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.085861}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 229.085373}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 229.085236}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.085861}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.066442}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.006804}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.014006}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.045632}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 15.22103}, {"measurand": "Power.Factor", "phase": "L1", "value": 0.050865}, {"measurand": "Power.Factor", "phase": "L2", "value": 0.082157}, {"measurand": "Power.Factor", "phase": "L3", "value": 0.0}], "timestamp": "2023-03-29T09:36:33Z"}], "seq_no": 5, "timestamp": "2023-03-29T09:36:33Z", "transaction_info": {"custom_data": {"time_spent_connected": 79, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"bb03cdc201668d18fa53ab1e2cc3e539",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.984159}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085861}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085373}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085236}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085861}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066442}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006804}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014006}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045632}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.22103}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.050865}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.082157}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.0}], 'timestamp': '2023-03-29T09:36:33Z'}], 'seq_no': 5, 'timestamp': '2023-03-29T09:36:33Z', 'transaction_info': {'custom_data': {'time_spent_connected': 79, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 544.984159}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085861}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085373}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085236}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.085861}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066442}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006804}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014006}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045632}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.22103}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.050865}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.082157}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.0}], 'timestamp': '2023-03-29T09:36:33Z'}], 'seq_no': 5, 'timestamp': '2023-03-29T09:36:33Z', 'transaction_info': {'custom_data': {'time_spent_connected': 79, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"7bca378442dea1053ac211584afa0ca6","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-13.0,"rssi":-63.0,"snr":9.8,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"7bca378442dea1053ac211584afa0ca6",{"currentTime":"2023-03-29T09:36:47.289954"}]
INFO:ocpp:cp6k: receive message [2,"d58934a76f9e5a70295a5e3db25963fd","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":545.013358},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.611374},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":229.610672},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":229.610535},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.611374},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.066613},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.00681},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.014047},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.045755},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":15.295049},{"measurand":"Power.Factor","phase":"L1","value":0.101922},{"measurand":"Power.Factor","phase":"L2","value":0.148631},{"measurand":"Power.Factor","phase":"L3","value":0.0}],"timestamp":"2023-03-29T09:36:53Z"}],"seqNo":6,"timestamp":"2023-03-29T09:36:53Z","transactionInfo":{"customData":{"timeSpentConnected":99,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 545.013358}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.611374}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 229.610672}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 229.610535}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.611374}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.066613}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.00681}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.014047}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.045755}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 15.295049}, {"measurand": "Power.Factor", "phase": "L1", "value": 0.101922}, {"measurand": "Power.Factor", "phase": "L2", "value": 0.148631}, {"measurand": "Power.Factor", "phase": "L3", "value": 0.0}], "timestamp": "2023-03-29T09:36:53Z"}], "seq_no": 6, "timestamp": "2023-03-29T09:36:53Z", "transaction_info": {"custom_data": {"time_spent_connected": 99, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"d58934a76f9e5a70295a5e3db25963fd",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 545.013358}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.611374}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.610672}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.610535}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.611374}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066613}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.00681}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014047}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045755}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.295049}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.101922}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.148631}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.0}], 'timestamp': '2023-03-29T09:36:53Z'}], 'seq_no': 6, 'timestamp': '2023-03-29T09:36:53Z', 'transaction_info': {'custom_data': {'time_spent_connected': 99, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 545.013358}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.611374}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.610672}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.610535}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.611374}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066613}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.00681}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014047}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045755}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.295049}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.101922}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.148631}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.0}], 'timestamp': '2023-03-29T09:36:53Z'}], 'seq_no': 6, 'timestamp': '2023-03-29T09:36:53Z', 'transaction_info': {'custom_data': {'time_spent_connected': 99, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"b2d87eae7b6aae94575fd559cbe21a3c","TransactionEvent",{"eventType":"Updated","evse":{"connectorId":1,"id":1},"meterValue":[{"sampledValue":[{"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"},"value":545.042505},{"measurand":"Voltage","unitOfMeasure":{"unit":"V"},"value":229.537628},{"measurand":"Voltage","phase":"L1","unitOfMeasure":{"unit":"V"},"value":229.536758},{"measurand":"Voltage","phase":"L2","unitOfMeasure":{"unit":"V"},"value":229.537155},{"measurand":"Voltage","phase":"L3","unitOfMeasure":{"unit":"V"},"value":229.537628},{"measurand":"Current.Import","unitOfMeasure":{"unit":"A"},"value":0.066685},{"measurand":"Current.Import","phase":"L1","unitOfMeasure":{"unit":"A"},"value":0.006879},{"measurand":"Current.Import","phase":"L2","unitOfMeasure":{"unit":"A"},"value":0.014177},{"measurand":"Current.Import","phase":"L3","unitOfMeasure":{"unit":"A"},"value":0.045629},{"measurand":"Power.Active.Import","unitOfMeasure":{"unit":"W"},"value":15.306739},{"measurand":"Power.Factor","phase":"L1","value":0.101922},{"measurand":"Power.Factor","phase":"L2","value":0.148631},{"measurand":"Power.Factor","phase":"L3","value":0.0}],"timestamp":"2023-03-29T09:37:13Z"}],"seqNo":7,"timestamp":"2023-03-29T09:37:13Z","transactionInfo":{"customData":{"timeSpentConnected":119,"vendorId":"com.chargepoint"},"timeSpentCharging":0,"transactionId":"6519450883396284070"},"triggerReason":"MeterValuePeriodic"}]
INFO:Ocpp_Server:RabbitMQ SENDING Message: {"destination": null, "origin": "Ocpp_Server", "method": "TransactionEvent", "type": "ocpp_log", "content": {"event_type": "Updated", "evse": {"connector_id": 1, "id": 1}, "meter_value": [{"sampled_value": [{"measurand": "Energy.Active.Import.Register", "unit_of_measure": {"unit": "Wh"}, "value": 545.042505}, {"measurand": "Voltage", "unit_of_measure": {"unit": "V"}, "value": 229.537628}, {"measurand": "Voltage", "phase": "L1", "unit_of_measure": {"unit": "V"}, "value": 229.536758}, {"measurand": "Voltage", "phase": "L2", "unit_of_measure": {"unit": "V"}, "value": 229.537155}, {"measurand": "Voltage", "phase": "L3", "unit_of_measure": {"unit": "V"}, "value": 229.537628}, {"measurand": "Current.Import", "unit_of_measure": {"unit": "A"}, "value": 0.066685}, {"measurand": "Current.Import", "phase": "L1", "unit_of_measure": {"unit": "A"}, "value": 0.006879}, {"measurand": "Current.Import", "phase": "L2", "unit_of_measure": {"unit": "A"}, "value": 0.014177}, {"measurand": "Current.Import", "phase": "L3", "unit_of_measure": {"unit": "A"}, "value": 0.045629}, {"measurand": "Power.Active.Import", "unit_of_measure": {"unit": "W"}, "value": 15.306739}, {"measurand": "Power.Factor", "phase": "L1", "value": 0.101922}, {"measurand": "Power.Factor", "phase": "L2", "value": 0.148631}, {"measurand": "Power.Factor", "phase": "L3", "value": 0.0}], "timestamp": "2023-03-29T09:37:13Z"}], "seq_no": 7, "timestamp": "2023-03-29T09:37:13Z", "transaction_info": {"custom_data": {"time_spent_connected": 119, "vendor_id": "com.chargepoint"}, "time_spent_charging": 0, "transaction_id": "6519450883396284070"}, "trigger_reason": "MeterValuePeriodic"}, "cp_id": "cp6k", "status": null}
INFO:ocpp:cp6k: send [3,"b2d87eae7b6aae94575fd559cbe21a3c",{}]
API - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 545.042505}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.537628}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.536758}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.537155}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.537628}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066685}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006879}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014177}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045629}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.306739}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.101922}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.148631}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.0}], 'timestamp': '2023-03-29T09:37:13Z'}], 'seq_no': 7, 'timestamp': '2023-03-29T09:37:13Z', 'transaction_info': {'custom_data': {'time_spent_connected': 119, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - INFO - RECEIVED: {'destination': None, 'origin': 'Ocpp_Server', 'method': 'TransactionEvent', 'type': 'ocpp_log', 'content': {'event_type': 'Updated', 'evse': {'connector_id': 1, 'id': 1}, 'meter_value': [{'sampled_value': [{'measurand': 'Energy.Active.Import.Register', 'unit_of_measure': {'unit': 'Wh'}, 'value': 545.042505}, {'measurand': 'Voltage', 'unit_of_measure': {'unit': 'V'}, 'value': 229.537628}, {'measurand': 'Voltage', 'phase': 'L1', 'unit_of_measure': {'unit': 'V'}, 'value': 229.536758}, {'measurand': 'Voltage', 'phase': 'L2', 'unit_of_measure': {'unit': 'V'}, 'value': 229.537155}, {'measurand': 'Voltage', 'phase': 'L3', 'unit_of_measure': {'unit': 'V'}, 'value': 229.537628}, {'measurand': 'Current.Import', 'unit_of_measure': {'unit': 'A'}, 'value': 0.066685}, {'measurand': 'Current.Import', 'phase': 'L1', 'unit_of_measure': {'unit': 'A'}, 'value': 0.006879}, {'measurand': 'Current.Import', 'phase': 'L2', 'unit_of_measure': {'unit': 'A'}, 'value': 0.014177}, {'measurand': 'Current.Import', 'phase': 'L3', 'unit_of_measure': {'unit': 'A'}, 'value': 0.045629}, {'measurand': 'Power.Active.Import', 'unit_of_measure': {'unit': 'W'}, 'value': 15.306739}, {'measurand': 'Power.Factor', 'phase': 'L1', 'value': 0.101922}, {'measurand': 'Power.Factor', 'phase': 'L2', 'value': 0.148631}, {'measurand': 'Power.Factor', 'phase': 'L3', 'value': 0.0}], 'timestamp': '2023-03-29T09:37:13Z'}], 'seq_no': 7, 'timestamp': '2023-03-29T09:37:13Z', 'transaction_info': {'custom_data': {'time_spent_connected': 119, 'vendor_id': 'com.chargepoint'}, 'time_spent_charging': 0, 'transaction_id': '6519450883396284070'}, 'trigger_reason': 'MeterValuePeriodic'}, 'cp_id': 'cp6k', 'status': None}
SQL_DB - ERROR - Traceback (most recent call last):
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/rabbit_mq/rabbit_handler.py", line 122, in on_request
    response_content = await self.handle_request(request)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 78, in on_db_request
    raise e
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 70, in on_db_request
    toReturn = method(cp_id=request.cp_id, **request.content)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/db.py", line 308, in TransactionEvent
    transaction = Transaction(**transaction_info)
  File "<string>", line 4, in __init__
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 481, in _initialize_instance
    with util.safe_reraise():
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 208, in raise_
    raise exception
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 479, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/home/it2s/Desktop/joao_csms/IT_CSMS/src/CSMS/db/database_Base.py", line 29, in __init__
    super().__init__(**kwargs)
  File "/home/it2s/.local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 1197, in _declarative_constructor
    raise TypeError(
TypeError: 'custom_data' is an invalid keyword argument for Transaction

INFO:ocpp:cp6k: receive message [2,"ba5eebfbf234f73341d8ac5fe8d7fc3d","Heartbeat",{"customData":{"rsrp":-93.0,"rsrq":-13.0,"rssi":-63.0,"snr":6.4,"vendorId":"com.chargepoint"}}]
INFO:ocpp:cp6k: send [3,"ba5eebfbf234f73341d8ac5fe8d7fc3d",{"currentTime":"2023-03-29T09:37:17.076511"}]
SQL_DB - INFO - DB Shuting down
INFO:Ocpp_Server:OCPP Server Shuting down
INFO:websockets.server:connection closed
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [24751]
